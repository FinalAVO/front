<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Search</title>

  <link rel="stylesheet"  type="text/css" href="../css/index.css"/>
  <link rel="stylesheet"  type="text/css" href="../css/bar.css"/>
  <link rel="stylesheet"  type="text/css" href="../css/report.css"/>
  <link rel="stylesheet"  type="text/css" href="../css/drop-down.css"/>

  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

  <style>

  a {
    text-decoration-line : none;
  }


  .keyword-search{
    padding-top: 10px;
    padding-left: 10px;
  }

  #btn_toggle{
    width:55px;
    height: 30px;
    font-size:10px;
    border:1px solid #ddd;
    background-color:#2F5971;
    border-radius:5px;
    color:#fff;
    font-weight:bold;
  }
  .filter-txt{
    font-size:12px;
    color: #666;
  }


  .select1{
    padding-right: 5px;
    width: 50px;
    height: 30px;
    text-align: center;
    font-size: 10px;
  }

  .hifilter{
    width:80px;
    list-style-type: none;
    font-size: 12px;
    margin-right: 8px;
    display: inline;
    padding-left: 10px;
    margin-top: 20px;
  }


  .filter-btn{
    width: 20px;
    height: 20px;
    font-size: 8px;
    background-color: #2F5971;
    color:white;
    border: none;
    border-radius: 5px;
  }
  .date-box {
    width: 200px;
    height: 32px;
    font-size: 12px;
    text-align: center;
    border: 0;
    border-radius: 15px;
    outline: none;
    padding-left: 10px;
    background-color: rgb(233, 233, 233);
    box-shadow: 0 1px 0 1px rgba(0,0,0,.04);
  }

  .bd00Bbs th a {
    background:url(../image/common/ico/arrow_0.gif) 100% 50% no-repeat;
    padding-right:16px;
    display:inline-block
  }
  .bd00Bbs th a.reverse {
    background:url(../image/common/ico/arrow_1.gif) 100% 50% no-repeat;
  }

  .iframe-preview{
    top:0;
    margin-left: 180px;
    display: inline;

  }

  #demo{
    width: 180px;
    height: 25px;
    background-color: rgb(233, 233, 233);
    border-radius: 15px;
    border: 4px solid rgb(233, 233, 233);
    box-shadow: 0 1px 0 1px rgba(0,0,0,.04);
    text-align: center;

  }


</style>

</head>
<body>
  <!-- 상단바   -->

  <div class="bar">
    <a href="/">
      <img width="155px" height="49px" style="top:0;padding-top:15px; padding-left: 25px; float:left;" src="../img/logo.gif">
    </a>

    <!-- 메뉴바 마우스 오버 -->
    <ul id="font" style="float:right; padding-right: 30px; padding-top:32px; color:gray;">
      <li><a href="/guest/gu_search">Search</a></li>
      <li><a href="/member/my_app">My app</a></li>
      <li><a href="/member/my_report">Report</a></li>
      <li><a href="/mypage/my_main">Mypage</a></li>
      <% if(session.loginData) { %>
        <div style="display:inline;">
          <li style="margin-right:7px;color:white;"><a href="/user/logout" style="color:white;">Logout</a></li>
        </div>

      <% } else { %>
        <li style="margin-right:12px;color:white;"><a href="/login/login" style="color:white;">Login</a></li>
      <% } %>
      </ul>

      </div>

  <br/>
  <hr/>

  <!-- 상단바 끝 -->


  <!-- 사이드 바 -->
<div class="side-menu">
  <ol>
    <br/>
    <span class="app-name"><%= my_app[0].app_name %></span>

    <div style="display:inline;">
      <input type="button" class="other-app" id="otherapp_btn" value=">"/>
    </div>

    <br/>
    <br/>
    <li><a class="menu" href="/member/my_search?db_name='<%= my_app[0].db_name %>'">전체리뷰 살펴보기</a></li>
    <li><a class="menu" href="/member/my_wordcloud?db_name='<%= my_app[0].db_name %>'">리뷰 키워드</a></li>
    <li><a class="menu" href="/member/my_report?db_name='<%= my_app[0].db_name %>'">주제별 보고서 받기</a></li>
    <li><a class="menu" href="#">인기 많은 리뷰</a></li>
  </ol>
</div>

<!-- 사이드바 끝 -->

<!--다른 앱 선택 드롭다운-->
<div style="position:absolute;">
  <div id="btn_btn_toggle" class="dropdown" style="display:none; position:fixed;">
    <button class="dropbtn">
      <span class="dropbtn_content" style="font-size:10px;">Other App</span>
      <span class="dropbtn_click" style="font-family: Material Icons; font-size : 16px; color : #ffffff; float:right;"
        onclick="dropdown()">arrow_drop_down</span>
    </button>
    <div class="dropdown-content">
      <% for(let i = 0; i < app_list.length; i++) { %>
        <a href="/member/my_report?db_name='<%= app_list[i].db_name %>'"><div class="fastfood" onclick="showMenu(this.innerText)"><%= app_list[i].app_name %></div></a>
      <%  } %>
    </div>
  </div>
</div>

<!-- 다른 앱 선택 드롭다운 끝 -->

  <!-- 1. Review Crawling 리뷰 가져오기 -->

  <div style="padding-top:35px;">
    <form method="post" action="/review/url" target="targetURL2">
      <div style="display:inline;">
        <input class="input-box" id="app_name" name="app_name" maxlength="10" placeholder="앱 아이디 입력 (10자리 숫자)"/>
      </div>
      <div style="display:inline;">
        <input class="search-box" id="searchAndroid" type='submit' value="Google"/>
      </div>
      <div style="display:inline;">
        <input class="search-box" id="searchIOS" type='submit' value="Apple"/>
      </div>
      <div style="display:inline;">
        <input type="button" class="font" id="btn_toggle" value="상세검색"/>
      </div>
      <input type="hidden" id="os" name="os" value="" />
      <div id="Toggle" style="display:none; margin-top: 20px;">
        <span class="filter-txt"> 별점 </span>
        <select id="star" name="star" class="select1">
          <option value="0" selected="selected">별점</option>
          <option value="0">전체</option>
          <option value="1">1점 이상</option>
          <option value="2">2점 이상</option>
          <option value="3">3점 이상</option>
          <option value="4">4점 이상</option>
          <option value="5">5점 이상</option>
        </select>

        <span class="filter-txt" style="padding-left:10px;"> 기간 설정 </span>
        <input type="text" id="demo" name="demo" value="" />

        <span class="filter-txt" style="padding-left:10px;"> 키워드 검색 </span>
        <input class="input-box" style="width:200px; font-size:12px; textalign:center; padding-left:10px;" name="filter" maxlengh="10" placeholder=" 키워드를 입력하세요" />


      </div>








      <script>


      $(document).ready(function(){
        $('#otherapp_btn').click(function(){

        const btnElement
        = document.getElementById('otherapp_btn');
        const otherapp
        = document.getElementById('btn_btn_toggle');

        if(otherapp.style.display=='none'){
          otherapp.style.display= 'inline';

        }else{
          otherapp.style.display='none';

        }

      })
      })


      $(function (){
        $("#btn_toggle").click(function (){
          if($("#Toggle").css("display") == 'none'){
            $("#Toggle").css("display", 'block');
          }else{
            $("#Toggle").css("display", 'none');
          }
        });

        $("#searchAndroid").click(function (){
          $("#os").val('android');
          if($("#app_name").val() == ""){
            alert("앱 이름을 입력해주세요!");
            return false;
          }
        });

        $("#searchIOS").click(function (){
          $("#os").val('ios');
          if($("#app_name").val() == ""){
            alert("앱 이름을 입력해주세요!");
            return false;
          }
        });
      });

      var today = new Date();

      var date = new Date();
      date.setMonth(date.getMonth() - 3);

        $(function () {
                    $('#demo').daterangepicker({
                        "locale": {
                            "format": "YYYY-MM-DD",
                            "separator": " ~ ",
                            "applyLabel": "확인",
                            "cancelLabel": "취소",
                            "fromLabel": "From",
                            "toLabel": "To",
                            "customRangeLabel": "Custom",
                            "weekLabel": "W",
                            "daysOfWeek": ["일", "월", "화", "수", "목", "금", "토"],
                            "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
                            "firstDay": 1
                        },
                        "startDate": date,
                        "endDate": today,
                        "drops": "down"
                    }, function (start, end, label) {
                        console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
                    });
                });

      </script>

    </form>
  </div>

  <br/>

  <div style="float:left; margin-top:35px;">

  <ul class="hifilter" style="margin-left:245px;">날짜 정렬
    <input type='button' class="filter-btn" id='date-button' naem='condition' onclick='changeBtnName1()' value='▼'/>
    <input type="hidden" id="hiddenDate" value="-DATE"/>
  </ul>


  <ul class="hifilter">별점 정렬
    <input type='button' class="filter-btn" id='star-button' naem='condition' onclick='changeBtnName2()'value='▼'/>
    <input type="hidden" id="hiddenStar" value="-STAR"/>
  </ul>

  <ul class="hifilter">추천수 정렬
    <input type='button' class="filter-btn" id='like-button' naem='condition' onclick='changeBtnName3()' value='▼'/>
    <input type="hidden" id="hiddenLike" value="-LIKE"/>
  </ul>

  </div>

  <script>

  <!-- 날짜 정렬 -->

    function changeBtnName1() {
      console.log($('#name').val());
      const btnElement
      = document.getElementById('date-button');
      const realVal
      = document.getElementById('hiddenDate');

      if(btnElement.value == "▼"){
        btnElement.value = "▲";
        realVal.value = "DATE";
        document.targetURL2.location.href="/search/re_search?app_name=&star="+$('#star').val()+"&filter="+$('#filter').val()+"&condition=DATE";
      }else{
        btnElement.value = "▼";
        realVal.value = "-DATE";
        document.targetURL2.location.href="/search/re_search?app_name=&star="+$('#star').val()+"&filter="+$('#filter').val()+"&condition=-DATE";
      }
    }

  <!-- 날짜 정렬 -->


  <!-- 별점 정렬 -->

    function changeBtnName2() {
      const btnElement
      = document.getElementById('star-button');
      const realVal
      = document.getElementById('hiddenStar');

      if(btnElement.value == "▼"){
        btnElement.value = "▲";
        realVal.value = "STAR";
        document.targetURL2.location.href="/search/re_search?app_name=&star="+$('#star').val()+"&filter="+$('#filter').val()+"&condition=STAR";
      }else{
        btnElement.value = "▼";
        realVal.value = "-STAR";
        document.targetURL2.location.href="/search/re_search?app_name=&star="+$('#star').val()+"&filter="+$('#filter').val()+"&condition=-STAR";
      }
    }

  <!-- 별점 정렬 -->


  <!-- 추천수 정렬 -->

    function changeBtnName3() {
      const btnElement
      = document.getElementById('like-button');
      const realVal
      = document.getElementById('hiddenLike');

      if(btnElement.value == "▼"){
        btnElement.value = "▲";
        realVal.value = "LIKE";
        document.targetURL2.location.href="/search/re_search?app_name=&star="+$('#star').val()+"&filter="+$('#filter').val()+"&condition=LIKE";
      }else{
        btnElement.value = "▼";
        realVal.value = "-LIKE";
        document.targetURL2.location.href="/search/re_search?app_name=&star="+$('#star').val()+"&filter="+$('#filter').val()+"&condition=-LIKE";
      }
    }

  <!-- 추천수 정렬 -->

  </script>






  <br/>
  <br/>

  <div style="text-align: center;">
    <iframe id="targetURL2" name="targetURL2" class="iframe-preview" width="80%" height="700px" align="center" style="border:none; border-radius: 10px;" src="/review">
    </iframe>
  </div>


  <div>

    <br/>
    <hr/>
    <br/>





  </div>


  <br/>
  <br/>
  <br/>

</body>
</html>
